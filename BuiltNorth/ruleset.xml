<?xml version="1.0"?>
<ruleset name="BuiltNorth" namespace="BuiltNorth\CodingStandards">
	<description>Built North coding standards for WordPress projects - Modern PHP with WordPress best practices</description>

	<!-- Base WordPress Coding Standards -->
	<rule ref="WordPress">
		<!-- ============================================= -->
		<!-- Modern PHP Features We Use                   -->
		<!-- ============================================= -->
		
		<!-- Allow short array syntax [] instead of array() -->
		<exclude name="Generic.Arrays.DisallowShortArraySyntax.Found"/>
		<exclude name="Universal.Arrays.DisallowShortArraySyntax.Found"/>
		
		<!-- Allow short ternary operator ?: -->
		<exclude name="Universal.Operators.DisallowShortTernary.Found"/>
		
		
		<!-- ============================================= -->
		<!-- File Naming and Structure                    -->
		<!-- ============================================= -->
		
		<!-- We use PSR-4 autoloading, not WordPress file naming -->
		<exclude name="WordPress.Files.FileName.NotHyphenatedLowercase"/>
		<exclude name="WordPress.Files.FileName.InvalidClassFileName"/>
		
		
		<!-- Allow namespaces (PSR-4) -->
		<exclude name="PSR1.Classes.ClassDeclaration.MissingNamespace"/>
		
		<!-- ============================================= -->
		<!-- Code Style Preferences                       -->
		<!-- ============================================= -->
		
		<!-- We prefer early returns over nested conditions -->
		<exclude name="WordPress.CodeAnalysis.AssignmentInCondition.FoundInWhileCondition"/>
		
		<!-- Yoda conditions reduce readability -->
		<exclude name="WordPress.PHP.YodaConditions.NotYoda"/>
		
		<!-- Inline comment punctuation is too strict -->
		<exclude name="Squiz.Commenting.InlineComment.InvalidEndChar"/>
		
		<!-- Function comment punctuation flexibility -->
		<exclude name="Squiz.Commenting.FunctionComment.ParamCommentFullStop"/>
		
		<!-- ============================================= -->
		<!-- Spacing and Formatting                       -->
		<!-- ============================================= -->
		
		<!-- No spaces inside function call parentheses -->
		<exclude name="PEAR.Functions.FunctionCallSignature.SpaceAfterOpenBracket"/>
		<exclude name="PEAR.Functions.FunctionCallSignature.SpaceBeforeCloseBracket"/>
		
	</rule>

	<!-- ============================================= -->
	<!-- Additional Configuration                     -->
	<!-- ============================================= -->
	
	<!-- PHP Compatibility Check -->
	<config name="testVersion" value="8.1-"/>
	<rule ref="PHPCompatibility"/>
	
	<!-- Enforce PSR-4 autoloading structure -->
	<rule ref="PSR1.Classes.ClassDeclaration">
		<exclude name="PSR1.Classes.ClassDeclaration.MissingNamespace"/>
	</rule>
	
	<!-- Enforce PSR-2 file ending -->
	<rule ref="PSR2.Files.EndFileNewline"/>
	
	<!-- ============================================= -->
	<!-- Built North Specific Rules                   -->
	<!-- ============================================= -->
	
	<!-- Minimum supported WordPress version -->
	<config name="minimum_supported_wp_version" value="6.0"/>
	
	<!-- Text domain configuration handled per-project -->
	<!-- Projects should add their own text_domain rule -->
	
	<!-- ============================================= -->
	<!-- File and Directory Exclusions                -->
	<!-- ============================================= -->
	
	<!-- What to scan by default -->
	<file>.</file>
	
	<!-- Standard exclusions -->
	<exclude-pattern>*/vendor/*</exclude-pattern>
	<exclude-pattern>*/node_modules/*</exclude-pattern>
	<exclude-pattern>*/build/*</exclude-pattern>
	<exclude-pattern>*/dist/*</exclude-pattern>
	<exclude-pattern>*/assets/js/lib/*</exclude-pattern>
	<exclude-pattern>*/assets/js/vendor/*</exclude-pattern>
	<exclude-pattern>*.min.js</exclude-pattern>
	<exclude-pattern>*.min.css</exclude-pattern>
	
	<!-- WordPress core files -->
	<exclude-pattern>*/wp-admin/*</exclude-pattern>
	<exclude-pattern>*/wp-includes/*</exclude-pattern>
	
	<!-- Test bootstrap files often need different rules -->
	<exclude-pattern>*/tests/bootstrap.php</exclude-pattern>
	<exclude-pattern>*/tests/wp-tests-config.php</exclude-pattern>
	
	<!-- ============================================= -->
	<!-- Default Arguments                            -->
	<!-- ============================================= -->
	
	<arg value="sp"/> <!-- Show sniff and progress -->
	<arg name="basepath" value="."/> <!-- Strip the file paths to relevant bit -->
	<arg name="colors"/> <!-- Show results with colors -->
	<arg name="extensions" value="php"/> <!-- Limit to PHP files -->
	<arg name="parallel" value="8"/> <!-- Process files in parallel -->
	
	<!-- Show results with full error description -->
	<arg value="s"/>
</ruleset>